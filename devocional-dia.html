<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Devocional del D√≠a | Gracia y Paz Radio</title>

    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="manifest" href="manifest.json" />
    <!-- Meta para el color de la barra de estado en iOS -->
    <meta name="apple-mobile-web-app-status-bar-style" content="#4a90e2" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header id="main-header">
      <div class="logo">GRACIA Y PAZ RADIO</div>
      <nav aria-label="Navegaci√≥n principal del sitio">
        <ul class="nav-links">
          <li><a href="index.html">Inicio</a></li>
          <li><a href="libros.html">Libros Cristianos</a></li>
          <li><a href="resumidos.html">Resumidos</a></li>
          <li><a href="predicaciones.html">Predicaciones</a></li>
          <li><a href="devocional-dia.html">Devocional del d√≠a</a></li>
          <li>
            <a
              href="https://acordes.lacuerda.net/musica_cristiana/"
              target="_blank"
              rel="noopener noreferrer"
              class="cta-nav"
              >Cancionero</a
            >
          </li>
        </ul>
      </nav>
    </header>

    <main>
      <section
        class="page-content-area"
        role="main"
        aria-label="Devocionales Diarios"
      >
        <h1 style="text-align: center">
          <i class="fas fa-bell"></i> Devocional del D√≠a
        </h1>
        <p
          style="
            text-align: center;
            max-width: 800px;
            margin: 0 auto 1rem;
            font-size: 1.1rem;
            opacity: 0.9;
          "
        >
          Explora nuestras series de devocionales para comenzar o terminar tu
          d√≠a con una reflexi√≥n de la Palabra de Dios. Busca por t√≠tulo o tema
          en nuestro archivo.
        </p>

        <!-- Botones para Compartir -->
        <div class="share-buttons">
          <p>¬°Comparte esta bendici√≥n!</p>
          <div>
            <button id="native-share-btn" class="share-button share-generic">
              <i class="fas fa-share-alt"></i> Compartir
            </button>
            <a
              id="whatsapp-share-btn"
              href="#"
              class="share-button share-whatsapp"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Compartir en WhatsApp"
            >
              <img src="icons/cm.png" alt="WhatsApp" class="share-icon-img" />
            </a>
            <a
              id="facebook-share-btn"
              href="#"
              class="share-button share-facebook"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="Compartir en Facebook"
            >
              <i class="fab fa-facebook-f"></i>
            </a>
          </div>
        </div>
        <!-- Campo de B√∫squeda -->
        <div class="search-container">
          <i class="fas fa-search"></i>
          <input
            type="text"
            id="search-input"
            placeholder="Buscar por t√≠tulo o tema..."
          />
        </div>

        <!-- Contenedor para las playlists de devocionales -->
        <div class="playlist-grid" id="playlist-container">
          <p id="loading-message">Cargando series de devocionales...</p>
        </div>

        <p
          id="no-results"
          style="text-align: center; display: none; margin-top: 2rem"
        >
          No se encontraron devocionales que coincidan con tu b√∫squeda.
        </p>

        <div style="text-align: center; margin-top: 4rem">
          <a href="index.html" class="cta-primary">Volver a P√°gina Principal</a>
        </div>
      </section>
    </main>

    <hr />

    <footer id="main-footer">
      <div class="footer-info">
        <p>
          üìç Emisora Central | ‚úâÔ∏è
          <a href="mailto:RadioGraciayPaz.Online@gmail.com"
            >contacto@RadioGraciayPaz.com</a
          >
        </p>
        <p>
          ¬© <time datetime="2025">2025</time> Gracia y Paz Radio ‚Äî Todos los
          derechos reservados.
        </p>
      </div>
    </footer>

    <div class="floating-player" aria-label="Reproductor de Radio Flotante">
      <p class="live-tag"><i class="fas fa-signal"></i> EN VIVO</p>
      <audio id="radio-audio" controls autoplay>
        <source src="https://stream.zeno.fm/mfer4shs398uv" type="audio/aac" />
        Tu navegador no soporta el elemento de audio.
      </audio>
    </div>

    <!-- Bot√≥n Flotante de WhatsApp -->
    <a
      href="https://api.whatsapp.com/send?phone=+5491166508379&text="
      class="whatsapp-flotante"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Contactar por WhatsApp"
    >
      <img src="icons/wt.png" alt="WhatsApp" />
    </a>

    <script src="youtube-loader.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- INICIALIZACI√ìN GENERAL ---
        initializeRadioPlayer();
        initializeShareButtons();
        registerServiceWorker();

        // --- CONFIGURACI√ìN DE YOUTUBE LOADER ---
        initializeYouTubePlaylist({
          apiKey: "AIzaSyAt-gPi1yFCurjJHEgR_nX16cRLTuMY7Po",
          playlistIds: [
            "PLXaZBqL0BjeTERkDzC8H5eq1z8u27pJkN",
            "PLXaZBqL0BjeQyfspyJsZyCUFyuYMkX-RJ",
            "PLXaZBqL0BjeSf1spsP3525y4BQLb6iKwT",
            "PLXaZBqL0BjeTYYG3_zrXBIpRDzRlxNNNU",
            "PLXaZBqL0BjeTy6gE3mC156kdcTb5NO5Pm",
            "PLbR4Dt3UlFy22S79r6X6AXVMoVZYYLb5P", // La playlist original
          ],
          containerId: "playlist-container",
          loadingMessageId: "loading-message",
          searchInputId: "search-input",
          noResultsId: "no-results",
          renderAs: "playlists", // Renderizar como tarjetas de playlist
        });

        // --- FUNCIONES AUXILIARES ---
        function initializeRadioPlayer() {
          const radioPlayer = document.getElementById("radio-audio");
          if (radioPlayer) {
            radioPlayer.play().catch(() => {
              // El autoplay fue bloqueado, el usuario deber√° iniciarlo manualmente.
            });
          }
        }

        function initializeShareButtons() {
          const nativeShareBtn = document.getElementById("native-share-btn");
          const whatsappBtn = document.getElementById("whatsapp-share-btn");
          const facebookBtn = document.getElementById("facebook-share-btn");

          const shareData = {
            title: "Devocional del D√≠a | Gracia y Paz Radio",
            text: "Te invito a ver las series de devocionales en Gracia y Paz Radio. ¬°Una bendici√≥n para tu d√≠a!",
            url: window.location.href,
          };

          // Fallback links
          whatsappBtn.href = `https://api.whatsapp.com/send?text=${encodeURIComponent(
            shareData.text + " " + shareData.url
          )}`;
          facebookBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(
            shareData.url
          )}`;

          if (navigator.share) {
            nativeShareBtn.addEventListener("click", async () => {
              try {
                await navigator.share(shareData);
              } catch (err) {
                console.error("Error al compartir:", err);
              }
            });
          } else {
            nativeShareBtn.style.display = "none"; // Ocultar si la API no es compatible
          }
        }

        function registerServiceWorker() {
          if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
              navigator.serviceWorker
                .register("/sw.js")
                .then((reg) => console.log("Service worker registrado", reg))
                .catch((err) =>
                  console.log("Error al registrar service worker", err)
                );
            });
          }
        }
      });
    </script>
  </body>
</html>
